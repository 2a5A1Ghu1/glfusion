/*!
	Slimbox v2.04 - The ultimate lightweight Lightbox clone for jQuery
	(c) 2007-2010 Christophe Beyls <http://www.digitalia.be>
	MIT-style license.
*/
(function(A){var I=A(window),x,g,J=-1,o,B,H,y,C,P,t,n=!window.XMLHttpRequest,v=[],m=document.documentElement,l={},w=new Image(),N=new Image(),L,b,h,q,M,e,K,d,E,O;var z,c,r;A(function(){A("body").append(A([L=A('<div id="lbOverlay" />').click(G)[0],b=A('<div id="lbCenter" />')[0],K=A('<div id="lbBottomContainer" />')[0]]).css("display","none"));h=A('<div id="lbImage" />').appendTo(b).append(q=A('<div style="position: relative;" />').append([M=A('<a id="lbPrevLink" href="#" />').click(F)[0],e=A('<a id="lbNextLink" href="#" />').click(f)[0]])[0])[0];d=A('<div id="lbBottom" />').appendTo(K).append([A('<a id="lbCloseLink" href="#" />').click(G)[0],E=A('<div id="lbCaption" />')[0],O=A('<div id="lbNumber" />')[0],A('<div style="clear: both;" />')[0]])[0]});A.slimbox=function(S,R,Q){x=A.extend({loop:false,overlayOpacity:0.8,overlayFadeDuration:400,resizeDuration:400,resizeEasing:"swing",initialWidth:250,initialHeight:250,imageFadeDuration:400,captionAnimationDuration:400,counterText:"Image {x} of {y}",closeKeys:[27,88,67],previousKeys:[37,80],nextKeys:[39,78],timerDuration:5000,slideshow:false},Q);if(typeof S=="string"){S=[[S,R]];R=0}C=I.scrollTop()+(I.height()/2);P=x.initialWidth;t=x.initialHeight;A(b).css({top:Math.max(0,C-(t/2)),width:P,height:t,marginLeft:-P/2}).show();y=n||(L.currentStyle&&(L.currentStyle.position!="fixed"));if(y){L.style.position="absolute"}A(L).css("opacity",x.overlayOpacity).fadeIn(x.overlayFadeDuration);D();k(1);g=S;x.loop=x.loop&&(g.length>1);c=x.timerDuration;r=x.slideshow;if(r){u("start")}return a(R)};A.fn.slimbox=function(Q,T,S){T=T||function(U){return[U.href,U.title]};S=S||function(){return true};var R=this;return R.unbind("click").click(function(){var W=this,Y=0,X,U=0,V;X=A.grep(R,function(aa,Z){return S.call(W,aa,Z)});for(V=X.length;U<V;++U){if(X[U]==W){Y=U}X[U]=T(X[U],U)}return A.slimbox(X,Y,Q)})};function D(){var R=I.scrollLeft(),Q=I.width();A([b,K]).css("left",R+(Q/2));if(y){A(L).css({left:R,top:I.scrollTop(),width:Q,height:I.height()})}}function k(Q){if(Q){A("object").add(n?"select":"embed").each(function(S,T){v[S]=[T,T.style.visibility];T.style.visibility="hidden"})}else{A.each(v,function(S,T){T[0].style.visibility=T[1]});v=[]}var R=Q?"bind":"unbind";I[R]("scroll resize",D);A(document)[R]("keydown",p)}function p(S){var R=S.keyCode,Q=A.inArray;return(Q(R,x.closeKeys)>=0)?G():(Q(R,x.nextKeys)>=0)?f():(Q(R,x.previousKeys)>=0)?F():false}function F(){u("previous");return a(B)}function f(){u("next");return a(H)}function u(Q){if(!r){return false}switch(Q){case"next":z.stop();z=A.timer(c,function(R){f()});break;case"previous":z.stop();z=A.timer(c,function(R){F()});break;case"stop":z.stop();break;default:z=A.timer(c,function(R){f()});break}}function a(Q){if(Q>=0){J=Q;o=g[J][0];B=(J||(x.loop?g.length:0))-1;H=((J+1)%g.length)||(x.loop?0:-1);s();b.className="lbLoading";l=new Image();l.onload=j;l.src=o}return false}function j(){b.className="";A(h).css({backgroundImage:"url("+o+")",visibility:"hidden",display:""});A(q).width(l.width);A([q,M,e]).height(l.height);A(E).html(g[J][1]||"");A(O).html((((g.length>1)&&x.counterText)||"").replace(/{x}/,J+1).replace(/{y}/,g.length));if(B>=0){w.src=g[B][0]}if(H>=0){N.src=g[H][0]}P=h.offsetWidth;t=h.offsetHeight;var Q=Math.max(0,C-(t/2));if(b.offsetHeight!=t){A(b).animate({height:t,top:Q},x.resizeDuration,x.resizeEasing)}if(b.offsetWidth!=P){A(b).animate({width:P,marginLeft:-P/2},x.resizeDuration,x.resizeEasing)}A(b).queue(function(){A(K).css({width:P,top:Q+t,marginLeft:-P/2,visibility:"hidden",display:""});A(h).css({display:"none",visibility:"",opacity:""}).fadeIn(x.imageFadeDuration,i)})}function i(){if(B>=0){A(M).show()}if(H>=0){A(e).show()}A(d).css("marginTop",-d.offsetHeight).animate({marginTop:0},x.captionAnimationDuration);K.style.visibility=""}function s(){l.onload=null;l.src=w.src=N.src=o;A([b,h,d]).stop(true);A([M,e,h,K]).hide()}function G(){if(J>=0){s();J=B=H=-1;A(b).hide();A(L).stop().fadeOut(x.overlayFadeDuration,k);u("stop")}return false}})(jQuery);if(!/android|iphone|ipod|series60|symbian|windows ce|blackberry/i.test(navigator.userAgent)){jQuery(function(a){a("a[rel^='lightbox']").slimbox({},null,function(b){return(this==b)||((this.rel.length>8)&&(this.rel==b.rel))})})}function processReqChange(){if(req.readyState==4&&req.status==200&&req.responseXML!=null){var d=[];var b=req.responseXML.getElementsByTagName("slide");var f="[";for(var e=0;e<b.length;e++){var a=b.item(e);var g=a.getAttribute("src").toString();var c=a.getAttribute("caption").toString();d.push([g,c])}jQuery.slimbox(d,0,{slideshow:true,loop:true})}}function loadXMLDoc(a){req=false;if(window.XMLHttpRequest){try{req=new XMLHttpRequest()}catch(b){req=false}}else{if(window.ActiveXObject){try{req=new ActiveXObject("Msxml2.XMLHTTP")}catch(b){try{req=new ActiveXObject("Microsoft.XMLHTTP")}catch(b){req=false}}}}if(req){req.onreadystatechange=processReqChange;req.open("GET",a,true);req.send("")}}jQuery.timer=function(a,b){var a=a||100;if(!b){return false}_timer=function(d,e){this.stop=function(){clearInterval(c.id)};this.internalCallback=function(){e(c)};this.reset=function(f){if(c.id){clearInterval(c.id)}var f=f||100;this.id=setInterval(this.internalCallback,f)};this.interval=d;this.id=setInterval(this.internalCallback,this.interval);var c=this};return new _timer(a,b)};